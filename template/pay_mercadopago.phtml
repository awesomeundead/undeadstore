<div class="pay flex column">
    <?php if ($message['success'] ?? false): ?>
        <div class="box notification">
            <?= $message['success'] ?>
        </div>
    <?php elseif ($message['pending'] ?? false): ?>
        <div class="box notification pending">
            <?= $message['pending'] ?>
        </div>
    <?php elseif ($message['failure'] ?? false): ?>
        <div class="box notification failure">
            <?= $message['failure'] ?>
        </div>
    <?php endif ?>
    
    <div class="box flex column gap-20">
        <div class="">Resumo do pedido</div>
        <div>
            <?php foreach ($description as $item): ?>
                <div><?= $item ?></div>
            <?php endforeach ?>
        </div>
        
        <div>Forma de pagamento</div>
        <div class="flex">
            <div class="box flex white">
                <img alt="Logo do Mercado Pago" src="/styles/mercadopago_icon.png" />
            </div>
        </div>
        
        <div>
            <div>Taxa: <?= html_money($fee) ?></div>
            <div>Total a pagar: <?= html_money($purchase_total + $fee) ?></div>
        </div>
    </div>

    <div class="box flex column align-center white">
        <div id="wallet_container"></div>
    </div>
</div>

<script src="https://sdk.mercadopago.com/js/v2"></script>
<script>

const mp = new MercadoPago('<?= $public_key ?>',
{
    locale: 'pt-BR'
});

mp.bricks().create('wallet', 'wallet_container',
{
    initialization:
    {
        preferenceId: '<?= $preference->id ?>',
    }
});

</script>